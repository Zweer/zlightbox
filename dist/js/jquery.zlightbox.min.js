/**
 * -----------------------------------------------------
 * zLightBox v0.0.1 by @dotzweer
 * -----------------------------------------------------
 * Copyright 2013 Niccol√≤ Olivieri <flicofloc@gmail.com>
 */

if("undefined"==typeof jQuery)throw new Error("ZLightBox requires jQuery");!function(a){"use strict";var b=function(c){this.options=a.extend({},b.DEFAULT,c),this.$element=a("<div></div>").addClass(this.options.name).css(this.options.css).css("display","none").appendTo(a(this.options.wrapper)),this.hidden=!0,this.options.modal&&this.$element.on("click.zlightbox",a.proxy(function(){a.isFunction(this.options.callback)?this.options.callback():this.hide()},this))};b.prototype.show=function(b){return this.hidden?(this.$element.css({display:"block",opacity:0}),this.hidden=!1,this.$element.fadeTo(this.options.animations.in.duration,this.options.css.opacity,this.options.animations.in.easing,a.proxy(function(){this.$element.css("opacity",this.options.css.opacity),this.options.onShow(),a.isFunction(b)&&b()},this)),this):this},b.prototype.hide=function(b){return this.hidden?this:(this.hidden=!0,this.$element.fadeTo(this.options.animations.out.duration,0,this.options.animations.out.easing,a.proxy(function(){this.$element.css({display:"none",opacity:0}),this.options.onHide(),a.isFunction(b)&&b()},this)),this)},b.DEFAULT={name:"zlightbox-overlay",wrapper:a("body"),callback:null,modal:!0,css:{position:"fixed",top:0,left:0,right:0,bottom:0,opacity:.6,background:"black",zIndex:2040},animations:{"in":{duration:200,easing:"swing"},out:{duration:200,easing:"swing"}},onShow:a.noop,onHide:a.noop};var c=function(b,c){this.options=c,b instanceof a&&(this.$elements=b,this._refreshLinks()),this._initElements(),this._initEvents()};c.prototype._refreshLinks=function(){this.$elements instanceof a&&(this.$elements.off("click.zlightbox"),this.$elements.on("click.zlightbox",a.proxy(this.show,this)))},c.prototype._initElements=function(){this.overlay=new b(a.extend({css:{zIndex:this.options.css.zIndex-10}},this.options.overlay)),this.$container=a(this.options.elements.container).css(this.options.css).appendTo(a(this.options.elements.wrapper)).fadeOut(0)},c.prototype._initEvents=function(){$window[0].onorientationchange=function(){},$window.on("resize.zlightbox",function(){}),$document.on("keydown.zlightbox",a.proxy(function(a){var b=a.keyCode;this.options.shortcuts.hide&&b==this.options.shortcuts.hide?this.hide():this.options.shortcuts.previous&&b==this.options.shortcuts.previous?this.previous():this.options.shortcuts.next&&b==this.options.shortcuts.next&&this.next()},this))},c.prototype.show=function(b){b instanceof a.Event?(b.preventDefault(),this.$current=a(b.delegateTarget),this.index=a.inArray(b.delegateTarget,this.$elements)):"number"==typeof b&&(this.$current=a(this.$elements[b]),this.index=b);var d=this.$current.data("zlightbox-type");d||this.$current.data("zlightbox-type",d=c.searchType(this.$current.attr("href"))),this.overlay.show()},c.prototype.hide=function(){return!1},c.prototype.previous=function(){},c.prototype.next=function(){},c.DEFAULT={elements:{wrapper:a("body"),overlay:'<div class="zlightbox-overlay"></div>',container:'<div class="zlightbox-container"></div>'},css:{zIndex:2050},overlay:{hideOnClick:!0}},c.REGEXP={embed:{swf:{regexp:/[^\.]\.(swf)\s*$/i},collegeHumor:{regexp:/collegehumor\.com\/video:/i,split:"video:",url:"http://www.collegehumor.com/moogaloop/moogaloop.swf?autoplay=true&amp;fullscreen=1&amp;clip_id={ID}"},wordpress:{regexp:/v\.wordpress\.com/i,split:"v.wordpress.com/",url:"http://s0.videopress.com/player.swf?guid={ID}&amp;v=1.01"},vzaar:{regexp:/vzaar\.com\/videos/i,split:"vzaar.com/videos/",url:"http://view.vzaar.com/{ID}.flashplayer?autoplay=true&amp;border=none"}},iframe:{youtube:{regexp:/youtube\.com\/watch/i,split:"v=",url:"http://www.youtube.com/embed/{ID}?autoplay=1&amp;enablejsapi=1"},youtu:{regexp:/youtu\.be\//i,split:"youtu.be/",url:"http://www.youtube.com/embed/{ID}?autoplay=1&amp;enablejsapi=1"},vimeo:{regexp:/vimeo\.com/i,split:"vimeo.com/",url:"http://player.vimeo.com/video/{ID}?hd=1&amp;autoplay=1&amp;show_title=1&amp;show_byline=1&amp;show_portrait=0&amp;color=&amp;fullscreen=1"},metaCafe:{regexp:/metacafe\.com\/watch/i,split:"metacafe.com/watch/",url:"http://www.metacafe.com/embed/{ID}/?ap=1"},dailyMotion:{regexp:/dailymotion\.com\/video/i,split:"dailymotion.com/video/",secondSplit:"_",url:"http://www.dailymotion.com/embed/video/{ID}?autoPlay=1&forcedQuality=hd720"},daily:{regexp:/dai\.ly\//i,split:"dai.ly/",url:"http://www.dailymotion.com/embed/video/{ID}?autoPlay=1&forcedQuality=hd720"},collegeHumor:{regexp:/collegehumor\.com\/video\//i,split:"collegehumor.com/video/",url:"http://www.collegehumor.com/e/{ID}"},ustream:{regexp:/ustream\.tv\//i,split:"ustream.tv/recorded/",url:"http://www.ustream.tv/embed/recorded/{ID}?v=3&amp;wmode=direct&amp;autoplay=true"},twitvid:{regexp:/twitvid\.com/i,split:"twitvid.com/",url:"http://www.twitvid.com/player/{ID}"},telly:{regexp:/telly\.com\//i,split:"telly.com/",url:"http://telly.com/embed.php?guid={ID}&amp;autoplay=1"},bing:{regexp:/bing\.com\/maps/i,split:"?",includeAmp:!0,url:"http://www.bing.com/maps/embed/?emid=3ede2bc8-227d-8fec-d84a-00b6ff19b1cb&amp;w={WIDTH}&amp;h={HEIGHT}&amp;{ID}"},streetView:{regexp:/maps\.google\.(.*)layer=c/i,split:"?",includeAmp:!0,url:"http://maps.google.com/?output=svembed&amp;{ID}"},googleMapsV2:{regexp:/maps\.google\.(^\/)*\/maps\/ms/i,split:"?",includeAmp:!0,url:"https://maps.google.com/maps/ms?output=embed&amp;{ID}"},googleMaps:{regexp:/maps\.google\./i,split:"?",includeAmp:!0,url:"https://maps.google.com/maps?ie=UTF8&amp;{ID}&amp;output=embed"}},image:{image:{regexp:/\.(?:jpg|png|jpeg|gif|bmp|tiff)/i}}},c.searchType=function(a){for(var b in c.REGEXP)for(var d in c.REGEXP[b])if(a.match(c.REGEXP[b][d].regexp))return{category:b,type:d};throw new Error('Undefined category/type for uri: "'+a+'"')},a.zLightBox=function(b,d){return new c(b,a.extend({},c.DEFAULT,d))},a.fn.zLightBox=function(b){var c=a(this),d=c.data("zlightbox"),e=a.extend({},c.data(),"object"==typeof b&&b);return d||c.data("zlightbox",d=a.zLightBox(this,e)),"string"==typeof b&&d[b](c),this}}(jQuery);